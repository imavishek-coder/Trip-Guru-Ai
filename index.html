<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trip Guru AI - Pro Planner</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* General Body Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }

        /* Custom Shadow for cards */
        .custom-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Itinerary Card Styles */
        .iti-card {
            background: white;
            border-left: 4px solid;
            transition: all 0.3s ease-in-out;
        }

        .iti-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Loading Spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Custom Checkbox Style */
        .custom-checkbox:checked {
            background-color: #3b82f6;
            border-color: #3b82f6;
        }

        .custom-checkbox:checked + label {
            color: #1e40af;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            max-width: 90%;
            width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Modal Component
        const Modal = ({ isOpen, onClose, title, children }) => {
            if (!isOpen) return null;

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal-content" onClick={e => e.stopPropagation()}>
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-2xl font-bold text-gray-800">{title}</h2>
                            <button onClick={onClose} className="text-gray-500 hover:text-gray-800 text-3xl">×</button>
                        </div>
                        <div>{children}</div>
                    </div>
                </div>
            );
        };

        // Main App Component
        function App() {
            // State variables for form inputs and app status
            const [fromDestination, setFromDestination] = useState('');
            const [toDestination, setToDestination] = useState('');
            const [days, setDays] = useState(5);
            const [budget, setBudget] = useState(20000);
            const [interests, setInterests] = useState([]);
            const [isCoupleTrip, setIsCoupleTrip] = useState(false);
            const [itinerary, setItinerary] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');
            const [searchWasCoupleTrip, setSearchWasCoupleTrip] = useState(false);
            
            // States for Gemini features
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [modalTitle, setModalTitle] = useState('');
            const [modalContent, setModalContent] = useState(null);
            const [isFeatureLoading, setIsFeatureLoading] = useState(false);
            
            // States for Geolocation feature
            const [location, setLocation] = useState(null);
            const [locationError, setLocationError] = useState('');
            const [isLocationLoading, setIsLocationLoading] = useState(false);

            // State for translation
            const [selectedLanguage, setSelectedLanguage] = useState('Hindi');
            
            // New state for loading messages
            const [loadingMessage, setLoadingMessage] = useState('');

            const loadingMessages = [
                "AI aapke liye best spots dhoondh raha hai...",
                "Perfect hotel options search kiye ja rahe hain...",
                "Aapke budget mein sab kuch fit karne ki koshish jaari hai...",
                "Local expert ki tarah plan banaya ja raha hai...",
                "Thoda sa intezaar, ek awesome trip plan taiyaar!"
            ];

            useEffect(() => {
                let interval;
                if (loading) {
                    setLoadingMessage(loadingMessages[0]);
                    let i = 1;
                    interval = setInterval(() => {
                        setLoadingMessage(loadingMessages[i % loadingMessages.length]);
                        i++;
                    }, 2500);
                }
                return () => clearInterval(interval);
            }, [loading]);


            const interestOptions = ['Adventure', 'Beaches', 'Mountains', 'Foodie', 'History', 'Relaxation', 'Spiritual', 'Shopping'];
            const cardColors = ['#3b82f6', '#10b981', '#ef4444', '#f97316', '#8b5cf6', '#ec4899', '#6366f1'];
            const languageOptions = ['Hindi', 'Bengali', 'Spanish', 'French', 'German', 'Japanese'];

            const handleInterestToggle = (interest) => {
                setInterests(prev =>
                    prev.includes(interest)
                        ? prev.filter(i => i !== interest)
                        : [...prev, interest]
                );
            };

            const openGoogleSearch = (query) => {
                window.open(query, '_blank');
            };
            
            // Generic function to call Gemini API
            const callGeminiAPI = async (prompt, expectJson = true) => {
                let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = { contents: chatHistory };
                const apiKey = "AIzaSyDTF7vnbqQR81OJf4YB1jEN7yPI66Y1hDM"; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error(`API error! status: ${response.status}`);
                
                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0) {
                    const rawText = result.candidates[0].content.parts[0].text;
                    if (expectJson) {
                        const startIndex = rawText.indexOf('{');
                        const endIndex = rawText.lastIndexOf('}');
                        if (startIndex > -1 && endIndex > -1) {
                            let jsonString = rawText.substring(startIndex, endIndex + 1);
                            try {
                                // Attempt to fix common JSON errors like trailing commas
                                jsonString = jsonString.replace(/,\s*([}\]])/g, '$1');
                                return JSON.parse(jsonString);
                            } catch (e) {
                                console.error("Failed to parse cleaned JSON:", e);
                                console.error("Problematic JSON string:", jsonString); // Log the string for debugging
                                throw new Error("Received invalid JSON from AI.");
                            }
                        } else {
                           throw new Error("No JSON object found in AI response.");
                        }
                    }
                    return rawText;
                } else {
                    throw new Error("No content received from AI.");
                }
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!fromDestination || !toDestination) {
                    setError('Please enter both starting and destination cities.');
                    return;
                }
                setLoading(true);
                setError('');
                setItinerary(null);
                setSearchWasCoupleTrip(isCoupleTrip); 

                const couplePromptPart = isCoupleTrip ? "This is a romantic trip for a couple. Please include couple-friendly activities, romantic spots, and suggestions for private dining." : "";

                const prompt = `
                    You are an expert travel planner for India named Trip Guru. Create a personalized travel itinerary in HINGLISH (mix of Hindi and English).
                    From City: ${fromDestination}
                    To City: ${toDestination}
                    Duration: ${days} days
                    Budget: Approximately ₹${Number(budget).toLocaleString('en-IN')} per person
                    Interests: ${interests.join(', ')}
                    Traveler Type: ${isCoupleTrip ? "Couple" : "General"}
                    Instructions: ${couplePromptPart} 
                    1. Provide the entire plan in Hinglish.
                    2. Provide a detailed day-by-day plan with specific names of local places.
                    3. For each day, include a 'Travel Tip' section on how to travel between spots.
                    4. Suggest local food.
                    5. Provide an 'approximateDistance' in this format "XXXX Kms".
                    6. Calculate a 'totalCostEstimate' which is the per person budget multiplied by the number of days. Format it like "₹XX,XXX for 1 person".
                    7. Provide a 'totalTimeEstimate' for one-way travel between the cities in a short format (e.g., "≈ 12 Hrs by Train").
                    8. Suggest 2-3 'nearbySuggestions' (places near the main destination that can also be visited).
                    9. Provide a 'budgetBreakdown' object with keys like "Khana (Food)", "Ghoomna (Transport)", "Activities", "Shopping" and their suggested daily amounts in INR based on the per person budget.
                    Return ONLY as a JSON object with Hinglish content: {"tripTitle": "...", "tripSummary": "...", "approximateDistance": "...", "totalCostEstimate": "...", "totalTimeEstimate": "...", "nearbySuggestions": [{"name": "...", "description": "..."}], "budgetBreakdown": {"Khana (Food)": "...", "Ghoomna (Transport)": "..."}, "dailyPlans": [{"day": 1, "title": "Pahla Din: Arrival aur Masti", "summary": "...", "morning": "...", "afternoon": "...", "evening": "...", "food": "...", "travelTip": "..."}]}.
                `;

                try {
                    const parsedItinerary = await callGeminiAPI(prompt);
                    setItinerary(parsedItinerary);
                } catch (err) {
                    console.error("Error in handleSubmit:", err);
                    setError("Sorry, something went wrong while creating your trip plan. Please try again.");
                } finally {
                    setLoading(false);
                }
            };

            const handleTranslate = async () => {
                if (!itinerary) return;

                setIsFeatureLoading(true);
                setModalTitle(`Plan translated to ${selectedLanguage}`);
                setIsModalOpen(true);

                let itineraryText = `Trip: ${itinerary.tripTitle}\nSummary: ${itinerary.tripSummary}\n\n`;
                itinerary.dailyPlans.forEach(day => {
                    itineraryText += `Day ${day.day}: ${day.title}\nSummary: ${day.summary}\nMorning: ${day.morning}\nAfternoon: ${day.afternoon}\nEvening: ${day.evening}\nFood: ${day.food}\nTravel Tip: ${day.travelTip}\n\n`;
                });

                const prompt = `Translate the following travel itinerary into ${selectedLanguage}. Keep the original structure and meaning.
                
                Itinerary:
                ${itineraryText}
                
                Return the translated text as a single string, without any JSON formatting.
                `;

                try {
                    const translatedText = await callGeminiAPI(prompt, false);
                    const content = (
                        <div className="text-gray-700 whitespace-pre-wrap">{translatedText}</div>
                    );
                    setModalContent(content);
                } catch (err) {
                    setModalContent(<p className="text-red-500">Could not translate the itinerary. Please try again.</p>);
                } finally {
                    setIsFeatureLoading(false);
                }
            };

            const generatePackingList = async () => {
                setIsFeatureLoading(true);
                setModalTitle("Aapki Packing List 🎒");
                setIsModalOpen(true);

                const prompt = `
                    Based on a ${days}-day trip to ${toDestination}, India, with interests in ${interests.join(', ')}, and considering the general weather of the region, generate a personalized packing list.
                    Return the response ONLY as a JSON object in the format: {"Clothing": ["item1", "item2"], "Toiletries": ["item1"], "Electronics": ["item1"], "Documents & Essentials": ["item1"]}.
                `;
                try {
                    const list = await callGeminiAPI(prompt);
                    const content = (
                        <div className="space-y-4">
                            {Object.entries(list).map(([category, items]) => (
                                <div key={category}>
                                    <h3 className="text-lg font-semibold text-gray-700 mb-2">{category}</h3>
                                    <ul className="list-disc list-inside text-gray-600 space-y-1">
                                        {items.map((item, index) => <li key={index}>{item}</li>)}
                                    </ul>
                                </div>
                            ))}
                        </div>
                    );
                    setModalContent(content);
                } catch (err) {
                    setModalContent(<p className="text-red-500">Could not generate the packing list. Please try again.</p>);
                } finally {
                    setIsFeatureLoading(false);
                }
            };
            
            const generateCulturalTips = async () => {
                setIsFeatureLoading(true);
                setModalTitle(`Cultural Tips for ${toDestination} 🙏`);
                setIsModalOpen(true);

                const prompt = `
                    Provide a list of important cultural etiquette tips for a tourist visiting ${toDestination}, India. Focus on greetings, dining, visiting religious places, and general conduct. Keep the tips short, respectful, and easy to remember.
                    Return the response ONLY as a JSON object with keys like "Greetings & Respect", "Dining Etiquette", "At Religious Places", "General Tips", where each key has an array of strings as its value.
                `;
                 try {
                    const tips = await callGeminiAPI(prompt);
                    const content = (
                        <div className="space-y-4">
                            {Object.entries(tips).map(([category, items]) => (
                                <div key={category}>
                                    <h3 className="text-lg font-semibold text-gray-700 mb-2">{category}</h3>
                                    <ul className="list-disc list-inside text-gray-600 space-y-1">
                                        {items.map((item, index) => <li key={index}>{item}</li>)}
                                    </ul>
                                </div>
                            ))}
                        </div>
                    );
                    setModalContent(content);
                } catch (err) {
                    setModalContent(<p className="text-red-500">Could not generate cultural tips. Please try again.</p>);
                } finally {
                    setIsFeatureLoading(false);
                }
            };

            const generateMustTryDishes = async () => {
                setIsFeatureLoading(true);
                setModalTitle(`Must-Try Dishes in ${toDestination} 🍲`);
                setIsModalOpen(true);

                const prompt = `
                    List the top 5 must-try local dishes for a tourist in ${toDestination}, India. For each dish, provide a short, enticing description.
                    Return the response ONLY as a JSON object in the format: {"dishes": [{"name": "Dish Name", "description": "Short description."}]}.
                `;
                 try {
                    const data = await callGeminiAPI(prompt);
                    const content = (
                        <div className="space-y-4">
                            {data.dishes.map((dish, index) => (
                                <div key={index}>
                                    <h3 className="text-lg font-semibold text-gray-700">{dish.name}</h3>
                                    <p className="text-gray-600">{dish.description}</p>
                                </div>
                            ))}
                        </div>
                    );
                    setModalContent(content);
                } catch (err) {
                    setModalContent(<p className="text-red-500">Could not generate dish recommendations. Please try again.</p>);
                } finally {
                    setIsFeatureLoading(false);
                }
            };
            
            const handleFindNearbyHotels = () => {
                setIsLocationLoading(true);
                setLocationError('');
                setLocation(null);

                if (!navigator.geolocation) {
                    setLocationError("Geolocation is not supported by your browser.");
                    setIsLocationLoading(false);
                    return;
                }

                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        setLocation({
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                        });
                        setIsLocationLoading(false);
                    },
                    () => {
                        setLocationError("Unable to retrieve your location. Please enable location services.");
                        setIsLocationLoading(false);
                    }
                );
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 sm:p-6 md:p-8">
                    <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title={modalTitle}>
                        {isFeatureLoading ? <div className="flex justify-center"><div className="loader"></div></div> : modalContent}
                    </Modal>

                    <div className="max-w-4xl mx-auto">
                        <header className="text-center mb-10">
                            <h1 className="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-800 tracking-tight">
                                Trip Guru <span className="text-blue-600">AI</span>
                            </h1>
                            <p className="text-gray-500 mt-2 text-md sm:text-lg">Aapka personal AI-powered travel planner</p>
                        </header>

                        <div className="bg-white p-6 sm:p-8 rounded-2xl custom-shadow mb-10">
                            <form onSubmit={handleSubmit}>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label htmlFor="fromDestination" className="block text-sm font-medium text-gray-700 mb-1">Kahan Se? (Starting City)</label>
                                        <input type="text" id="fromDestination" value={fromDestination} onChange={(e) => setFromDestination(e.target.value)} placeholder="e.g., Delhi" className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" />
                                    </div>
                                    <div>
                                        <label htmlFor="toDestination" className="block text-sm font-medium text-gray-700 mb-1">Kahan Jana Hai? (Destination)</label>
                                        <input type="text" id="toDestination" value={toDestination} onChange={(e) => setToDestination(e.target.value)} placeholder="e.g., Goa" className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" />
                                    </div>
                                    <div>
                                        <label htmlFor="days" className="block text-sm font-medium text-gray-700 mb-1">Kitne Din ke liye</label>
                                        <input type="number" id="days" min="1" value={days} onChange={(e) => setDays(Number(e.target.value))} placeholder="e.g., 5" className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" />
                                    </div>
                                    <div>
                                        <label htmlFor="budget" className="block text-sm font-medium text-gray-700 mb-1">Budget (per person, in ₹)</label>
                                        <input type="number" id="budget" min="500" step="100" value={budget} onChange={(e) => setBudget(Number(e.target.value))} placeholder="e.g., 20000" className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" />
                                    </div>
                                </div>
                                <div className="mt-6">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">Aapki pasand (Interests)</label>
                                    <div className="flex flex-wrap gap-2">
                                        {interestOptions.map(interest => (
                                            <button key={interest} type="button" onClick={() => handleInterestToggle(interest)} className={`px-4 py-2 text-sm rounded-full transition-all duration-200 border-2 ${interests.includes(interest) ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-gray-700 border-gray-300 hover:border-blue-500'}`}>{interest}</button>
                                        ))}
                                    </div>
                                </div>
                                <div className="mt-6">
                                    <div className="flex items-center">
                                        <input id="couple-checkbox" type="checkbox" checked={isCoupleTrip} onChange={() => setIsCoupleTrip(!isCoupleTrip)} className="h-5 w-5 rounded custom-checkbox border-gray-300 text-blue-600 focus:ring-blue-500 transition" />
                                        <label htmlFor="couple-checkbox" className="ml-3 block text-sm font-medium text-gray-700 transition">Travelling as a couple?</label>
                                    </div>
                                </div>
                                <div className="mt-8 text-center">
                                    <button type="submit" disabled={loading} className="w-full md:w-auto inline-flex justify-center items-center px-12 py-3 border border-transparent text-base font-medium rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105 disabled:bg-blue-300 disabled:cursor-not-allowed">
                                        {loading ? 'Aapka Trip Plan ban raha hai...' : '✨ Mera Trip Plan Banao'}
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <div className="bg-white p-6 sm:p-8 rounded-2xl custom-shadow mb-10 text-center">
                            <h2 className="text-2xl font-bold text-gray-800 mb-4">Aas-Paas ke Hotels Dhundein</h2>
                            <p className="text-gray-600 mb-6">Apni current location ka istemal karke turant nazdeeki hotels search karein.</p>
                            
                            {!location && (
                                <button onClick={handleFindNearbyHotels} disabled={isLocationLoading} className="w-full md:w-auto inline-flex justify-center items-center px-8 py-3 border border-transparent text-base font-medium rounded-full shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-transform transform hover:scale-105 disabled:bg-green-300">
                                    {isLocationLoading ? 'Location le rahe hain...' : '📍 Use My Live Location'}
                                </button>
                            )}

                            {locationError && <p className="text-red-500 mt-4">{locationError}</p>}

                            {location && (
                                <div className="mt-4 flex flex-wrap gap-4 justify-center">
                                    <button onClick={() => openGoogleSearch(`https://www.google.com/search?q=hotels+near+me`)} className="px-5 py-2 text-base font-medium rounded-full text-white bg-blue-600 hover:bg-blue-700 transition-transform transform hover:scale-105">🏨 Find Nearby Hotels</button>
                                    <button onClick={() => openGoogleSearch(`https://www.google.com/search?q=couple+friendly+hotels+near+me`)} className="px-5 py-2 text-base font-medium rounded-full text-white bg-pink-600 hover:bg-pink-700 transition-transform transform hover:scale-105">❤️ Find Couple Friendly Hotels</button>
                                </div>
                            )}
                        </div>


                        <div className="mt-10">
                            {error && <div className="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg" role="alert"><p className="font-bold">Oops!</p><p>{error}</p></div>}
                            {loading && (
                                <div className="flex flex-col justify-center items-center p-10">
                                    <div className="loader"></div>
                                    <p className="text-gray-600 mt-4 text-center">{loadingMessage}</p>
                                </div>
                            )}
                            {itinerary && (
                                <div className="bg-white p-6 sm:p-8 rounded-2xl custom-shadow">
                                    <div className="bg-gray-50 p-4 rounded-lg mb-6 flex flex-wrap gap-2 sm:gap-3 justify-center">
                                        <button onClick={generatePackingList} className="flex-grow sm:flex-grow-0 px-3 py-2 text-xs sm:text-sm font-medium rounded-full text-white bg-indigo-600 hover:bg-indigo-700 transition-transform transform hover:scale-105">✨ Packing List</button>
                                        <button onClick={generateCulturalTips} className="flex-grow sm:flex-grow-0 px-3 py-2 text-xs sm:text-sm font-medium rounded-full text-white bg-teal-600 hover:bg-teal-700 transition-transform transform hover:scale-105">✨ Cultural Tips</button>
                                        <button onClick={generateMustTryDishes} className="flex-grow sm:flex-grow-0 px-3 py-2 text-xs sm:text-sm font-medium rounded-full text-white bg-amber-600 hover:bg-amber-700 transition-transform transform hover:scale-105">✨ Local Dishes</button>
                                    </div>
                                    
                                    <div className="bg-blue-50 border border-blue-200 p-5 rounded-xl mb-8">
                                        <h3 className="text-2xl font-bold text-gray-800 mb-4 text-center">Kaise Pahunchein?</h3>
                                        <div className="text-center mb-5 grid grid-cols-1 sm:grid-cols-2 gap-4">
                                            <div>
                                                <p className="text-sm text-gray-500">Anumanit Doori</p>
                                                <p className="text-lg font-bold text-blue-600">{itinerary.approximateDistance || 'N/A'}</p>
                                            </div>
                                            <div>
                                                <p className="text-sm text-gray-500">Anumanit Samay</p>
                                                <p className="text-lg font-bold text-blue-600">{itinerary.totalTimeEstimate || 'N/A'}</p>
                                            </div>
                                        </div>
                                        <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 text-center">
                                            <button onClick={() => openGoogleSearch(`https://www.google.com/flights?q=flights+from+${fromDestination}+to+${toDestination}`)} className="p-3 bg-white rounded-lg shadow hover:shadow-md transition">✈️<span className="block text-sm font-medium mt-1">Flights</span></button>
                                            <button onClick={() => openGoogleSearch(`https://www.google.com/search?q=trains+from+${fromDestination}+to+${toDestination}`)} className="p-3 bg-white rounded-lg shadow hover:shadow-md transition">🚆<span className="block text-sm font-medium mt-1">Trains</span></button>
                                            <button onClick={() => openGoogleSearch(`https://www.google.com/search?q=buses+from+${fromDestination}+to+${toDestination}`)} className="p-3 bg-white rounded-lg shadow hover:shadow-md transition">🚌<span className="block text-sm font-medium mt-1">Buses</span></button>
                                            <button onClick={() => openGoogleSearch(`http://googleusercontent.com/maps/google.com/2{fromDestination}/${toDestination}`)} className="p-3 bg-white rounded-lg shadow hover:shadow-md transition">🗺️<span className="block text-sm font-medium mt-1">View on Map</span></button>
                                        </div>
                                    </div>

                                    <h2 className="text-2xl sm:text-3xl font-bold text-gray-800 mb-2">{itinerary.tripTitle}</h2>
                                    <p className="text-gray-600 mb-8 text-lg">{itinerary.tripSummary}</p>
                                    
                                    <div className="bg-gray-100 p-4 rounded-lg mb-6 flex flex-col sm:flex-row items-center gap-4">
                                        <select 
                                            value={selectedLanguage} 
                                            onChange={(e) => setSelectedLanguage(e.target.value)}
                                            className="w-full sm:w-auto p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        >
                                            {languageOptions.map(lang => <option key={lang} value={lang}>{lang}</option>)}
                                        </select>
                                        <button onClick={handleTranslate} className="w-full sm:w-auto px-5 py-2 text-base font-medium rounded-full text-white bg-gray-700 hover:bg-gray-800 transition">Translate Plan</button>
                                    </div>

                                    <div className="space-y-6">
                                        {itinerary.dailyPlans.map((day, index) => (
                                            <div key={day.day} className="iti-card p-5 rounded-lg" style={{ borderColor: cardColors[index % cardColors.length] }}>
                                                <h3 className="text-xl font-bold text-gray-800">Day {day.day}: {day.title}</h3>
                                                <p className="text-gray-500 mt-1 mb-4">{day.summary}</p>
                                                <div className="space-y-3 text-gray-700">
                                                    <p><strong>Subah:</strong> {day.morning}</p>
                                                    <p><strong>Dopeher:</strong> {day.afternoon}</p>
                                                    <p><strong>Shaam:</strong> {day.evening}</p>
                                                    <p><strong>🍴 Khana Peena:</strong> {day.food}</p>
                                                    <p className="mt-2 p-3 bg-blue-50 rounded-lg"><strong>🚌 Travel Tip:</strong> {day.travelTip}</p>
                                                </div>
                                                <div className="mt-4 pt-4 border-t border-gray-200 flex flex-wrap gap-3">
                                                    <button onClick={() => openGoogleSearch(`https://www.google.com/search?q=Best+budget+hotels+in+${toDestination}`)} className="flex items-center px-3 py-1.5 text-sm bg-green-100 text-green-800 rounded-full hover:bg-green-200 transition">
                                                        <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2l-7 7-7-7M19 10v10a1 1 0 01-1 1h-3" /></svg>
                                                        Find Hotels
                                                    </button>
                                                    {searchWasCoupleTrip && (
                                                        <button onClick={() => openGoogleSearch(`https://www.google.com/search?q=Couple+friendly+hotels+in+${toDestination}`)} className="flex items-center px-3 py-1.5 text-sm bg-pink-100 text-pink-800 rounded-full hover:bg-pink-200 transition">
                                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1.5" viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clipRule="evenodd" /></svg>
                                                            Couple Friendly Hotels
                                                        </button>
                                                    )}
                                                    <button onClick={() => openGoogleSearch(`https://www.google.com/search?q=Top+tourist+places+to+visit+in+${toDestination}`)} className="flex items-center px-3 py-1.5 text-sm bg-purple-100 text-purple-800 rounded-full hover:bg-purple-200 transition">
                                                        <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                                                        Explore Places
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                    
                                    {itinerary.nearbySuggestions && itinerary.nearbySuggestions.length > 0 && (
                                        <div className="mt-8">
                                            <h3 className="text-2xl font-bold text-gray-800 mb-4">Aas-Paas ke Suggestions</h3>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                {itinerary.nearbySuggestions.map((place, index) => (
                                                    <div key={index} className="bg-gray-50 p-4 rounded-lg">
                                                        <h4 className="font-bold text-gray-700">{place.name}</h4>
                                                        <p className="text-sm text-gray-600">{place.description}</p>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    {itinerary.budgetBreakdown && (
                                        <div className="bg-lime-50 border border-lime-200 p-5 rounded-xl mt-8">
                                            <h3 className="text-2xl font-bold text-gray-800 mb-4 text-center">Anumanit Kharcha Breakdown 💰</h3>
                                            <div className="text-center mb-4">
                                                 <p className="text-lg text-gray-700">Total Anumanit Kharcha: <span className="font-bold text-lime-600">{itinerary.totalCostEstimate || 'N/A'}</span></p>
                                                 <p className="text-sm text-gray-500">(per person for {days} days)</p>
                                            </div>
                                            <ul className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                                {Object.entries(itinerary.budgetBreakdown).map(([category, amount]) => (
                                                    <li key={category} className="bg-white p-3 rounded-lg flex justify-between items-center sm:block sm:text-center">
                                                        <span className="font-medium text-gray-700 sm:block">{category}</span>
                                                        <span className="font-bold text-lime-600 sm:block sm:mt-1">₹{amount} / day</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                        <footer className="text-center mt-12 text-gray-500 text-sm">
                            <p className="mb-2">Powered by Avishek Giri</p>
                            <div className="flex justify-center items-center space-x-2">
                                <span>Made with ❤️ by</span>
                                <a href="https://github.com/imavishek-coder" target="_blank" rel="noopener noreferrer" className="flex items-center font-medium text-gray-700 hover:text-blue-600 transition">
                                    <svg className="w-5 h-5 mr-1.5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                        <path fillRule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.168 6.839 9.492.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.398.1 2.651.64.7 1.03 1.595 1.03 2.688 0 3.848-2.338 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z" clipRule="evenodd" />
                                    </svg>
                                    imavishek-coder
                                </a>
                            </div>
                        </footer>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
